<!DOCTYPE html>
<html lang="en">
<!-- TABULA VERSION: ask for it on the console. -->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/img/favicon.ico" type="image/x-icon">

    <title>Tabula</title>

    <link href="/css/styles.css" rel="stylesheet">

    <!-- Selector-specific CSS -->
    <link href="/css/selectors.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script type="text/javascript" src="/js/vendor/jquery.min.js"></script>
    <script type="text/javascript" src="/js/vendor/underscore-min.js"></script>
    <script type="text/javascript" src="/js/vendor/backbone-min.js"></script>
    <script type="text/javascript" src="/js/vendor/bootstrap.js"></script>
  </head>


  <body data-spy="scroll" data-target=".nav.sidebar-nav" data-offset="0">
    <div class="ribbon-wrapper-green" id="dev-mode-ribbon" style="display: none;"><div class="ribbon-green">DEV mode</div></div>

    <!-- Fixed navbar -->
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand" href="/">Tabula</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a id="upload-nav" href="/">My Files</a></li>
            <li><a id="about-nav" href="/about">About</a></li>
            <li><a id="help-nav" href="/help">Help</a></li>
            <li><a href="https://github.com/tabulapdf/tabula">Source Code</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>




    <div id="tabula-app"> <!-- TODO remember to change this ID to match what page we're on.  id="page-selections", id="page-export"-->   
    </div>
    <div id="tabula-dataview">

    </div>

    <div id="templates">
      <script type="text/template" id="page-template" >
        <div class="page" id="page-div-<%= number %>">
          <img src="<%= image_url %>" draggable="false">
        </div>
      </script>
      <script type="text/template" id="thumbnail-template" >
        <a href="#page-<%= number %>"><img src="<%= image_url %>"></a>
        <div class="remove">
          <i class="glyphicon glyphicon-remove delete-page"></i>
          <!-- i title="rotate this page right" class="icon-repeat rotate-left"></i>
          <i title="rotate this page left" class="icon-repeat flip rotate-right"></i -->
        </div>
        <p><%= number %></p>
      </script>

      <script type="text/template" id="export-control-panel-template">
        <form id="download-form" action="/pdf/<%=pdf_id%>/data?format=csv" method="post">
          <div id="hidden-fields">
            <input type='hidden' class='data-query' name='coords' value='<%=list_of_coords%>' >
          </div>
          <label for="format">Export Format:</label>
          <select name="format" class="form-control">
            <option value="csv">CSV</option>
            <option value="tsv">TSV</option>
            <option value="json">JSON</option>
            <option value="json">ðŸ’©SV</option>
            <option value="xml">XML</option>
          </select>
          <a href="#"><button type="submit" id="download-data" class="btn btn-default" data-action='/pdf/<%=pdf_id%>/data?format=csv'>
            <i class="glyphicon glyphicon-download"></i>
            Export
          </button></a>
          <a href="#"><button type="button" id="copy-csv-to-clipboard" class="btn btn-default" <%=copyDisabled%> >
            <i class="glyphicon glyphicon-paperclip"></i>
             Copy to Clipboard
          </button></a>
        </form>
      </script>

      <script type="text/template" id="select-control-panel-template" >
        <a href="#"><button id="restore-detected-tables" type="button" class="btn btn-default" <%= show_restore_detected_tables %>><i class="glyphicon glyphicon-flash"></i> Autodetect Tables</button></a>
        <a href="#"><button type="button" id="clear-all-selections" class="btn btn-default" <%= disable_clear_all_selections %>><i class="glyphicon glyphicon-remove-circle"></i> Clear All Selections</button></a>
        <a href="#"><button type="button" id="all-data" class="btn btn-default" <%= disable_download_all %>><i class="glyphicon glyphicon-eye-open"></i> Preview & Export Extracted Data</button></a>
      </script>

      <script type="text/template" id="export-page-sidebar-template">
          <h4>Is the extracted data incorrect?</h4>

          <p>You can revise your selected cells or try an alternate extraction method.</p>

          <h5>Revise Selected Cells</h5>
          <p>Data has been extracted from the cells you selected in the previous step. You can revise your selection(s) to add or remove cells.</p>
          <p>
            <button type="button" class="btn btn-default" id="revise-selections"><i class="glyphicon glyphicon-arrow-left"></i> Revise selection(s)</button>
          </p>

          <h5>Choose Alternate Extraction Method</h5>

          <p>The current preview uses the <strong>Stream</strong> extraction method. If the data is not mapped to the correct cells, try the <strong>Lattice</strong> method instead.</p>

          <div class="btn-group" data-toggle="buttons-radio" id="extraction-method-btns" <%=disableExtractionMethodButtons%> >
            <button type="button" id="original-method-btn" class="btn btn-default extraction-method-btn" data-method="original" ><i class="glyphicon glyphicon-th stream"></i> Stream</button>
            <button type="button" id="spreadsheet-method-btn" class="btn btn-default extraction-method-btn" data-method="spreadsheet"><i class="glyphicon glyphicon-th lattice"></i> Lattice</button>
          </div>

          <p>
            Stream looks for <em>whitespace</em> between columns, while Lattice looks for <em>boundary lines</em> between columns.
          </p>

         <h5>Still look wrong?</h5>
          <p><a href="http://www.github.com/tabulapdf/tabula/issues/new">Contact the developers</a> and tell us what you tried to do that didnâ€™t work.</p>
      </script>

      <!-- TODO: abstract out commonalities of select/export page templates -->
      <script type="text/template" id="export-page-template">
        <div id="sidebar">
        </div>

        <div id="main-pane">
            <div id="control-panel">
            </div>

           <h2>Preview of Extracted Tabular Data</h2>
            <div id="table-container">
            <% if(data.length){ %>
              <table class="table table-bordered extracted-data">
                <tbody>
                <% _(data).each(function(row){ %>
                  <tr>
                    <% _(row).each(function(cell){ %>
                      <td><%= cell %></td>
                    <% }) %>
                  </tr>
                <% }) %>
                </tbody>
            <% } else if (loading) { %>
             <div class="alert alert-success" id="loading"><span id="spinner"></span><span style="position: relative; left: 16px; font-size: 24px;">Loading...</span></div>
            <% } else { %>
              <span class="no-data">No data.</span>
            <% } %>
            </table>
            </div>
        </div>
      </script>

      <script type="text/template" id="pdf-view-template" >
        <div id="sidebar">
          <!-- thumbnails get rendered here by JS -->
        </div>
        <div id="main-pane">
          <div id="control-panel">
          </div>
 
          <div id="pages-container">
          </div>
        </div>
        <nestedscript type="text/javascript" src="/js/vendor/spin.min.js"></nestedscript> 
        <nestedscript type="text/javascript" src="/js/resizableSelection.js"></nestedscript> 
        <nestedscript type="text/javascript" src="/js/rectangularSelector.js"></nestedscript> 
        <nestedscript type="text/javascript" src="/js/vendor/ZeroClipboard.min.js"></nestedscript> 
      </script>

      <script type="text/template" id="navbar-template">
        <div class="navbar navbar-inverse navbar-fixed-top">
          <div class="navbar-inner">
            <div class="container-fluid">
              <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </a>
              <a class="brand" href="/"><strong>Tabula</strong> is experimental software</a>
              <div class="nav-collapse collapse">
                <ul class="nav">
                  <li><a href="/">Home</a></li>
                  <li><a href="#about" rel="popover" data-html="true" data-placement="bottom" data-content="<p><strong>Tabula</strong> is a tool to help liberate data tables trapped inside PDF files</p><br><p>It was created by <a href='http://jazzido.com' target='_blank'>Manuel AristarÃ¡n</a> with the help of <a href='http://propublica.org'>ProPublica</a>, <a href='http://blogs.lanacion.com.ar/data/'>La NaciÃ³n DATA</a> and <a href='http://www.mozillaopennews.org/'>Knight-Mozilla OpenNews</a></p>" data-title="What is <strong>Tabula</strong>?">About</a></li>
                </ul>

              </div><!--/.nav-collapse -->
            </div>
          </div>
        </div>
      </script>

      <script type="text/template" id="upload-template">
        <div class="container">
          <div class="jumbotron">
              <h4>Import a PDF</h4> <!-- TODO: enable multiple, change this to 'Import one or more PDFs' -->
              <form id="upload" action="/upload.json" method="post" enctype="multipart/form-data" class="form-inline">

              <div class="input-group">
              <!-- we are using this here: http://www.abeautifulsite.net/whipping-file-inputs-into-shape-with-bootstrap-3/ -->
                  <span class="input-group-btn">
                      <span class="btn btn-primary btn-file">
                          Browse&hellip; <input type="file" id="file" name="file" /* multiple */ accept="application/pdf">
                      </span>
                  </span>
                  <input type="text" class="form-control" readonly>
              </div>
                 <button type="submit" class="btn btn-default">Import</button>
              </form>

              <div id="progress-container">
                <h4>Upload Progress</h4>
                <span id="message"></span>
                <div class="progress">
                  <div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: <%= pct_complete %>%;"><span class="sr-only"> <%= pct_complete %>% Complete </span></div>
                </div>

              </div>

              <hr>

              <h4>Imported PDFs</h4>

              <div id="file-list-container">
              <table class="table file-list tablesorter" id="fileTable">
                <thead>
                  <tr>
                    <th>File Name</th>
                    <th>Size</th>
                    <th>Pages</th>
                    <th>Date Added</th>
                    <th>Remove</th>
                    <th>Process</th>
                  </tr>
                </thead>
                <tbody id="uploaded-files-container">
                </tbody>
              </table>
              </div>

          </div> <!-- /jumbotron -->
        </div> <!-- /container -->

        <!-- we are using this here: http://www.abeautifulsite.net/whipping-file-inputs-into-shape-with-bootstrap-3/ -->
        <nestedscript type="text/javascript" src="/js/vendor/upload-group.js"></nestedscript> 
        <nestedscript type="text/javascript" src="/js/vendor/jquery.tablesorter.min.js"></nestedscript>
        <nestedscript type="text/javascript" src="/js/vendor/spin.min.js"></nestedscript> 
      </script>

      <script type="text/template" id="uploaded-files-template">
          <% _(workspace).each(function(file){ %>
            <tr>
              <td><%= file['file'] %></td>
              <td>TK kB</td> <!-- TODO size -->
              <td>TK</td>     <!-- TODO page count -->
              <td><%= new Date(parseInt(file['time']) * 1000).toUTCString().slice(5, -7) %></td>
              <td><a href="javascript:"><i data-filename=<%= file['file'] %> data-pdfid=<%= file['id'] %> class="glyphicon glyphicon-remove delete-pdf"></i></a></td>
              <td><a href="/pdf/<%= file['id'] %>"><button type="button" class="btn btn-sm btn-success">Extract Data</button></a></td>
            </tr>
          <% }) %>
      </script>

      <script type="text/template" id="upload-error-template" >
        <div class="container-fluid">
          <div class="row-fluid">
            <div class="span6 offset3">
              <div class="hero-unit">
                <h1>Tabula</h1>
                <h2>Upload Error</h2>
                <p><span id="message"><%= message %></span></p>
              </div> <!-- /hero-unit -->
            </div>
          </div>
        </div>
      </script>

      <script type="text/template" id="about-template">
        <div class="container">
           <a href="https://github.com/tabulapdf/tabula"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub"></a>

          <div class="jumbotron about">

            <h1>About Tabula</h1>
            <p>Tabula is a tool for liberating data tables trapped inside PDF files</p>

            <p>Tabula was created by journalists for journalists and anyone else working with data locked away in PDFs. Tabula will always be free and open source.</p>
            <p>If youâ€™ve ever tried to do anything with data provided to you in PDFs, you know how painful it is â€” there's no easy way to copy-and-paste rows of data out of PDF files. Tabula allows you to extract that data into a CSV or Microsoft Excel spreadsheet using a simple, easy-to-use interface. Tabula works on Mac, Windows and Linux.</p>
            <p>Caveat: Tabula only works on text-based PDFs, not scanned documents. If you can click-and-drag to select text in your table in a PDF viewer (even if the output is disorganized trash), then your PDF is text-based and Tabula should work.</p>
            <p>Security Concerns? Tabula is designed with security in mind. Your PDF and the extracted data never touch the net -- when you use Tabula, as long as your browser's URL bar says "localhost" or "127.0.0.1", all processing takes place on your local machine. Tabula does download a list of Tabula versions from our server to alert you if Tabula has been updated (and we use hits to that list to count how often Tabula is being used); it also downloads a few badges and assets from the web.</p>

            <h2>Who Uses Tabula?</h2>
            <p>Tabula is used to power investigative reporting at news organizations of all sizes, including ProPublica, The Times of London, Foreign Policy, La NaciÃ³n (Argentina) and the St. Paul (MN) Pioneer Press.</p>
            <p>Grassroots organizations like SchoolCuts.org rely on Tabula to turn clunky documents into human-friendly public resources.</p>
            <p>And researchers of all kinds use Tabula to turn PDF reports into Excel spreadsheets, CSVs, and JSON files for use in analysis and database applications.</p>

            <h2>Credits</h2>
            <p>Tabula was created by <a href="http://jazzido.com/" target="_blank">Manuel AristarÃ¡n</a>, <a href="https://mike.tig.as/" target="_blank">Mike Tigas</a> and <a href="http://jeremybmerrill.com/" target="_blank">Jeremy B. Merrill</a> with the support of <a href="http://propublica.org">ProPublica</a>, <a href="http://blogs.lanacion.com.ar/data/">La NaciÃ³n DATA</a>, <a href="http://www.mozillaopennews.org/">Knight-Mozilla OpenNews</a>, <a href="http://nytimes.com">The New York Times</a> and <a href="http://www.knightfoundation.org/">The Knight Foundation</a>.</p>
          </div> <!-- /jumbotron -->
        </div> <!-- /container -->
       </script>

      <script type="text/template" id="help-template">
        <div class="container">
          <div class="jumbotron help">
          <h1>Having trouble with Tabula</h1>

          <p> Help text TK </p>
          </div> <!-- /jumbotron -->
        </div> <!-- /container -->
       </script>


    </div> <!-- /templates -->




    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

    </script> <!-- TODO: move this to tabula.js, only run it if we're in upload page viewer -->

    <script type="text/javascript" src="/js/tabula.js"></script> <!-- actually starts Tabula -->

  </body>
</html>
